---
const { ContactoUrl } = Astro.props;
---

<nav id="navbar" class="sticky top-0 z-[20] flex  items-center justify-center sm:justify-between w-[80%] max-w-[1200px] mx-auto px-2 py-2 sm:px-3 sm:py-[9px] my-2 sm:my-4 rounded-md transition-all duration-700 gap-2 sm:gap-4">
  <h1 id="navbar-title" class="text-xl sm:text-3xl md:text-4xl poppins-semibold transition-all duration-500">
    <span id="name1" class="text-[#123472] m-0 p-0">Adag</span><span id="name2" class="text-[#ff0040] m-0 p-0">IO</span>
  </h1>
  <a id="contacto" class="text-white bg-black px-3 py-2 rounded-lg text-xs sm:text-sm md:text-base font-medium transition-colors duration-500 whitespace-nowrap">
    Contacto
  </a>
</nav>

<script>
const nav = document.getElementById("navbar");
const contacto = document.getElementById("contacto");
const title = document.getElementById("navbar-title");
const name1 = document.getElementById("name1");
const name2 = document.getElementById("name2");

const MIN_WIDTH = 105;
nav.style.transition = "width 1.2s cubic-bezier(0.4,0,0.2,1), background-color 0.7s, color 0.7s, box-shadow 0.7s, padding 0.7s";
window.addEventListener("scroll", () => {
  const viewportWidth = window.innerWidth;
  const scrollY = Math.min(window.scrollY, 80);
  const progress = scrollY / 80;
  let minPercent;
  if (viewportWidth < 320) {
    minPercent = 0.80;
  } else if (viewportWidth < 390) {
    minPercent = 0.70;
  } else if (viewportWidth < 480) {
    minPercent = 0.60;
  } else if (viewportWidth < 640) {
    minPercent = 0.45;
  } else if (viewportWidth < 1024) {
    minPercent = 0.40;
  } else {
    minPercent = 0.25;
  }
  let maxPercent = 0.8;
  let percent = maxPercent - (maxPercent - minPercent) * progress;
  let newWidth = viewportWidth * percent;
  if (newWidth < MIN_WIDTH) newWidth = MIN_WIDTH;
  if (newWidth > viewportWidth * maxPercent) newWidth = viewportWidth * maxPercent;
  nav.style.width = `${newWidth}px`;
  nav.style.transition = "width 0.7s cubic-bezier(0.4,0,0.2,1), background-color 0.5s, color 0.5s, box-shadow 0.5s, padding 0.5s";
  const isScrolled = window.scrollY > 40;
  nav.classList.toggle("bg-gray-900/40", isScrolled);
  nav.classList.toggle("backdrop-blur-xs", isScrolled);
  nav.classList.toggle("text-white", isScrolled);
  nav.classList.toggle("top-8", isScrolled);
  nav.classList.toggle("rounded-md", isScrolled);
  nav.classList.toggle("bg-gray-100/5", isScrolled);
  nav.classList.toggle("bg-transparent", !isScrolled);
  nav.classList.toggle("text-black", !isScrolled);
  contacto.classList.toggle("text-black", isScrolled);
  contacto.classList.toggle("bg-white", isScrolled);
  contacto.classList.toggle("text-white", !isScrolled);
  contacto.classList.toggle("bg-black", !isScrolled);
  name1.classList.toggle("text-white", isScrolled);
  name2.classList.toggle("text-white", isScrolled);
  name1.classList.toggle("text-[#123472]", !isScrolled);
  name2.classList.toggle("text-[#ff0040]", !isScrolled);
  nav.classList.toggle("max-sm:flex-col",isScrolled);
  nav?.classList.toggle("sm:flex-row",!isScrolled);
  nav.classList.toggle("py-1", isScrolled);
  nav.classList.toggle("px-2", isScrolled);
  nav.classList.toggle("py-2", !isScrolled);
  nav.classList.toggle("px-2", !isScrolled);
  title.classList.toggle("text-lg", viewportWidth < 480);
  title.classList.toggle("text-xl", viewportWidth >= 480 && viewportWidth < 640);
  title.classList.toggle("text-3xl", viewportWidth >= 640 && viewportWidth < 1024);
  title.classList.toggle("text-4xl", viewportWidth >= 1024);

  // Ajustar top según tamaño de pantalla
  if (isScrolled) {
    if (viewportWidth < 640) {
      nav.classList.add("top-12");
      nav.classList.remove("top-8");
    } else {
      nav.classList.add("top-8");
      nav.classList.remove("top-12");
    }
  } else {
    nav.classList.remove("top-8", "top-12");
  }
});
</script>
